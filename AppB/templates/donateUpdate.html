<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Conversion Donation</title>
    <script>
        // Function to fetch the exchange rate from the selected 'fromCurrency' to 'toCurrency' using USD as an intermediate
        async function fetchExchangeRate(fromCurrency, toCurrency, apiKey) {
            try {
                // Fetch rates from and to USD for both the selected currencies
                const url = `https://openexchangerates.org/api/latest.json?app_id=${apiKey}&symbols=${fromCurrency},${toCurrency}`;
                const response = await fetch(url);
                const data = await response.json();

                // Calculate the rate from 'fromCurrency' to USD (if fromCurrency is not USD)
                let fromRate = (fromCurrency === 'USD') ? 1 : 1 / data.rates[fromCurrency];

                // Calculate the rate from USD to 'toCurrency'
                let toRate = data.rates[toCurrency];

                // Effective rate from 'fromCurrency' to 'toCurrency'
                return fromRate * toRate;
            } catch (error) {
                console.error('Error fetching exchange rate:', error);
                document.getElementById('convertedAmount').innerText = 'Error fetching exchange rate.';
                return null;
            }
        }

        // Function to handle the conversion process when the user clicks the convert button
        async function convertCurrency() {
            const apiKey = 'd9b9fe7f6f5042c7b67dc542fa7097b9';  // Place your OpenExchangeRates API key here
            const amount = document.getElementById('donationAmount').value;
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;

            if (amount && fromCurrency && toCurrency) {
                const exchangeRate = await fetchExchangeRate(fromCurrency, toCurrency, apiKey);
                if (exchangeRate) {
                    const convertedAmount = (amount * exchangeRate).toFixed(2);
                    document.getElementById('convertedAmount').innerText = `This will be equivalent to ${convertedAmount} ${toCurrency}.`;
                }
            }
        }
    </script>
</head>
<body>
    <h1>Donation Currency Converter</h1>
    <form>
        <label for="donationAmount">Enter donation amount:</label>
        <input type="number" id="donationAmount" placeholder="Enter amount" required>
        <br><br>

        <label for="fromCurrency">Currency you are donating from:</label>
        <select id="fromCurrency">
            <option value="USD">USD - US Dollar</option>
            <option value="EUR">EUR - Euro</option>
            <option value="GBP">GBP - British Pound</option>
            <option value="ZAR">ZAR - South African Rand</option>
        </select>
        <br><br>

        <label for="toCurrency">Currency you are donating to:</label>
        <select id="toCurrency">
            <option value="EUR">EUR - Euro</option>
            <option value="USD">USD - US Dollar</option>
            <option value="GBP">GBP - British Pound</option>
            <option value="ZAR">ZAR - South African Rand</option>
        </select>
        <br><br>

        <button type="button" onclick="convertCurrency()">Convert Currency</button>
        <br><br>

        <p id="convertedAmount">This will be equivalent to 0 in the selected currency.</p>
        
        
    
    
    
    </form>
</body>
</html>
